{"ts":1354153618855,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"// Add event listeners once the DOM has fully loaded by listening for the\n// `DOMContentLoaded` event on the document, and adding your listeners to\n// specific elements when it triggers.\ndocument.addEventListener('DOMContentLoaded', function () {\n\tif (document.getElementById('disable') != null)\n\t\tdocument.getElementById('disable').addEventListener('click', function() {__disable();});\n\tif (document.getElementById('enable') != null)\n\t\tdocument.getElementById('enable').addEventListener('click', function() {__enable();});\n\tdocument.getElementById('docs').addEventListener('click', function() {home();});\n\tdocument.getElementById('options').addEventListener('click', function() {options();});\n \n});\n\nfunction goTo(url) {\n\tchrome.tabs.getAllInWindow(undefined, function(tabs) {\n\t\tfor (var i = 0, tab; tab = tabs[i]; i++) {\n\t\t\tif (tab.url && tab.url == url) {\n\t\t\t\tchrome.tabs.update(tab.id, {selected: true});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tchrome.tabs.create({ url: url });\n\t});\n}\n\nfunction currentSite(callback) {\n\tchrome.tabs.getSelected(null, function(t) {\n\t\tcallback(t.url);\n\t\twindow.close();\n\t});\n}\n\nfunction toHost(url) {\n\tvar host = new RegExp('(https{0,1}://.*?)/.*').exec(url);\n\tif (host == null)\n\t\thost = url;\n\telse\n\t\thost = host[1];\n\treturn host;\n}\n\nfunction __enable() {\n\tcurrentSite(function(url) {\n\t\tvar host = toHost(url);\n\t\tvar sites = localStorage['sites'].split(/,\\s+/);\n\n\t\tvar newsites = [];\n\t\tfor (var x = 0; x < sites.length; x++) {\n\t\t\tvar site = sites[x];\n\t\t\tif (host != site)\n\t\t\t\tnewsites.push(site);\n\t\t}\n\t\tlocalStorage['sites'] = newsites.join(', ');\n\t\tchrome.extension.sendRequest({ command: 'refreshTabs' });\n\t});\n}\n\nfunction __disable() {\n\tcurrentSite(function(url) {\n\t\tvar sites = localStorage['sites'].split(/,\\s+/);\n\t\tvar host = toHost(url);\n\t\tsites.push(host);\n\t\tlocalStorage['sites'] = sites.join(', ');\n\t\tchrome.extension.sendRequest({ command: 'refreshTabs' });\n\t});\n}\n\nfunction home() {\n\tgoTo('http://chrome.afterthedeadline.com/proofreading-for-google-chrome-help/');\n}\n\nfunction options() {\n\tgoTo('chrome-extension://' + location.hostname + '/options/options.html');\n}\n"]],"start1":0,"start2":0,"length1":0,"length2":2098}]],"length":2098}
{"contributors":[],"silentsave":false,"ts":1354153707512,"patch":[[{"diffs":[[0,"__enable();});\n\t"],[1,"if (document.getElementById('docs') != null)\n        "],[0,"document.getElem"]],"start1":509,"start2":509,"length1":32,"length2":85},{"diffs":[[0,"e();});\n"],[-1,"\t"],[1,"    if (document.getElementById('options') != null)    \n\t    "],[0,"document"]],"start1":651,"start2":651,"length1":17,"length2":77},{"diffs":[[0,"ns();});"],[-1,"\n"],[0," \n});\n\nf"]],"start1":798,"start2":798,"length1":17,"length2":16}]],"length":2210,"saved":false}
{"ts":1354153746642,"patch":[[{"diffs":[[0,"Id('disable') !="],[1,"="],[0," null)\n"],[-1,""],[0,"\t\tdocument.getEl"]],"start1":273,"start2":273,"length1":39,"length2":40},{"diffs":[[0,"'enable') !="],[1,"="],[0," null)\n\t\tdoc"]],"start1":417,"start2":417,"length1":24,"length2":25},{"diffs":[[0,"d('docs') !="],[1,"="],[0," null)\n     "]],"start1":553,"start2":553,"length1":24,"length2":25},{"diffs":[[0,"ons') !="],[1,"="],[0," null)  "]],"start1":699,"start2":699,"length1":16,"length2":17},{"diffs":[[0,"ll)    \n"],[-1,"\t"],[1,"    "],[0,"    docu"]],"start1":711,"start2":711,"length1":17,"length2":20}]],"length":2217,"saved":false}
